#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const { exec } = require('child_process');
const realCurrentPath = path.join(__dirname, '/../dist/index.js');

function execCommand(command) {
  exec(command, (error, stdout, stderr) => {
    if (error) {
      console.log(error);
      return;
    }
    if (stdout) {
      console.log(stdout);
      return;
    }
    console.log(stderr);
    console.log('error to exec node ./dist/index.js');
  });
}

const conditional = fs.existsSync(realCurrentPath);
console.info("[+] - the path of package 'clifrontend':", realCurrentPath);
if (conditional) {
  const command2 = `node ${realCurrentPath}`;
  console.info("[+] - exist the path dist/index.js from package 'clifrontend'");
  execCommand(command2);
  return;
}

console.log("hasn't folder dist");
// const command1 = path.join('npx tsc', __dirname, '/../src/');
// const command2 = path.join('node', __dirname, '/../dist/index.js');
// execCommand(`${command1} && ${command2}`);
